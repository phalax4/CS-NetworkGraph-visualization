<base href="https://www.cs.utexas.edu/users/ans/classes/cs439/problem_sets/ps4.html">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" type="text/css" href="../ans.css" />

  <title>CS439: Principles of Computer Systems Discussion Section Problem Set 4</title>
<meta NAME="keywords" CONTENT="Alison N. Smith Norman">
</head>

<body>

<div class="interior-content">
<!-- * MAIN TEXT * -->
    <td VALIGN="CENTER" WIDTH="100%">
 <font face=arial > 

      <!-- *NAV BAR* -->
      <table WIDTH=100% BORDER=0 BGCOLOR=white CELLSPACING=0 CELLPADDING=0 HEIGHT=25 LINK=white>
	<tr>
	  <td width=120 align=center><small><a HREF="../../index.html" target=_top><b>Home</b></a></small></td>

	  <td width=120 align=center><small><a HREF="../index.html" target=_top><b>CS439</b></a></small></td>
	</tr>
      </table>


<center>
<p><h1><b>CS439: Principles of Computer Systems </b></h1></p>
<p>
<h2><b>Discussion Section Problem Set 4<br></b></h2>
<h3><b> Due in Section on Friday, September 29, 2017 </h3></b>
</center>
The problem set must be completed before section and brought to section.  To
ensure that your problem set is turned in correctly and that you receive credit
for discussion section, you must follow these guidelines exactly.

<ul>
<li>Include the following header at the top of your file:
<pre>
Discussion Section Problem Set #: 
Student Name:
EID:
CS login:
Email address:
Unique Number: 
</pre>
</li>
<p>
<li>You may either type your answers or write them by hand, but you must bring a
  hard copy to discussion section.
  </li>
<p>
<li>
   In discussion section, your TA will check that you make a good effort on the
problem set and that you are participating in the discussions in section and
ready and able to answer when called upon.  If all of those are true, you will
receive credit for discussion section that day.  Note that a "good effort" on
the problem set includes that all answers are in your own words and <i>not</i>
copied from anywhere else, including the slide deck.
</li>
</ul>
<!-- Please refer to the
<a href="problem_set_turnin.html">problem set turnin instructions</a>.-->
<hr>

<ol>
  <p> </p>
  <p> </p>
<!--Number One--->
<li>
Consider a system using a multilevel feedback queue scheduler.  Its scheduler is
configured to have four queues, which are, in order of highest priority to
lowest priority: Q1, Q2, Q3, and Q4.  The queues have quantums sized 5s, 10s,
20s, and 40s, respectively.

<p>
For each of the following three processes, determine which queue it is in when
it begins its final quantum.

<p>
<ul>
<li>Process A, runtime 40s, blocks every 2s.
</li>
<li>Process B, runtime 42s, never blocks.
</li>
<li>Process C, runtime 70s, blocks at 7s, 11s, 25s, 42s, 48s, where those times
are points in its execution.
</li>
</ul>
<p>
</li>
<p>
<!---Number Two--->
<li>
Given the following pseudocode:
<pre>
int i = 0;

int main(void)
{ 
   fork();

   if(/*CHILD*/)
   {
      i = i - 1;
      return SUCCESS;
   }
   if(/*PARENT*/)
   {
      i = i + 1;
      wait for child to terminate;

      printf("i = %d\n", i);
   }
}
</pre>
<p>
<ul>
<li>What is the output?  Describe in detail why it is that way.
</li>
<p>
<li>Are there other possible outputs?  Why or why not?  If so, give
another example of what the printed values of ``i'' might be and
explain how to force the program to execute the same way each time.
</li>
</ul>
</li>
<p>

<li> Now consider this pseudocode involving kernel threads:
<pre>
int i = 0;

void thread1(void *)
{
   i = i - 1;
}

void thread2(void *)
{
   i = i + 1;
}

int main(void)
{
   createThread(thread1);
   createThread(thread2);

   /* wait for thread 1 and thread 2 to end */

   printf("i = %d\n", i);
}
</pre>

<ul>
<li> What is the output?  Describe in detail why it is that way.
</li>
<p>
<li>
Are there other possible outputs?  Why or why not?  If so, give
another example of what the printed values of ``i'' might be and
explain how to force the program to execute the same way each time.
</li>
</ul>
</li>
<p>
<!---Number Three--->
<li>
Consider the following program fragment:

<pre>
if(a > 0)
 sema_down(s1);
else
 sema_down(s2);

b++;

sema_down(s3);

if(b < 0 && a <= 0)
   sema_down(s1);
else if(b >= 0 && a > 0)
   sema_down(s2);
else
   sema_down(s4);

a++;

sema_up(s4);
sema_up(s3);
sema_up(s2);
sema_up(s1);

</pre>
<p>
s1, s2, s3 and s4 are semaphores initialized to 1. All variables are
automatic (on the stack). Now, consider two threads running this
fragment of code simultaneously, can there be a deadlock? Why, or why
not?
<p>
</li>
<p>
<!--Number Four--->
<li>
You need two Hydrogen atoms and one Oxygen atom to make water.
Using semaphores, write a pseudocode solution that generates water whenever the
right resources are available.  You must have three functions: one to
generate Oxygen, one to generate Hydrogen, and one to generate water.
Assume the three methods may be executed by any number of threads
concurrently.
<p>
 </li>
<p>
<li>
Solve the water problem using monitors (pseudocode).
<p>
</li>
<p>
<!---Number Five--->
<li>
 A standardized C language threads programming interface has been
  developed for UNIX systems, IEEE POSIX 1003.1c.  Thread
  implementations that adhere to this standard are known as POSIX
  threads, or Pthreads.  Using Pthreads, write a C program that
  creates three new threads and assigns each of them a number.  Each
  thread should print the numbers 1-10, one per line, with its number
  beginning the line, so that the beginning output from thread 1 would
  look like the following:
<pre>
1: 1
1: 2
1: 3
</pre>
The original thread should wait for the new threads to finish and then
print a statement notifying the user that the application is finished.
<p>
Explain the output.  Turn in your code, output, and explanation.
<p>
<i>Hint</i>: <tt>man 7 pthreads</tt> provides an overview of pthreads
and should help you get started.  Notice that to compile code that
uses pthreads you need to include the <tt>-pthread</tt> flag.
<p>
</li>
<p>
<!---In Class--->
</ol>
<hr>
</body>
</html>

